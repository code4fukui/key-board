<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><link rel="icon" href="data:">
<title>qwerty</title>
<link rel="stylesheet" type="text/css" href="keyboard.css"/>
<script type="module">

window.onload = function() {
	const kbkeycode = [27, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, -1/*eject*/, 192, 49, 50, 51, 52, 53, 54, 55, 56, 57, 48, 189, 187, 8/*46*/, 9, 81, 87, 69, 82, 84, 89, 85, 73, 79, 80, 219, 221, 220, 20, 65, 83, 68, 70, 71, 72, 74, 75, 76, 186, 222, 13, 16, 90, 88, 67, 86, 66, 78, 77, 188, 190, 191, 16, -1/*x*/, 17, 18/*option*/, 91/*command*/, 32, 93/*command*/, -1/*option*/, 37, 38, 40, 39];
	
	const keys = keyboard.getElementsByTagName("p");
//	keys[5].className += " keydown";
	const s = [];
	for (let i = 0; i < keys.length; i++) {
		let cls = "x";
		try {
			cls = keys[i].className.split(" ")[1].substring(1);
		} catch (e) {
		}
		s.push(cls);
	}
	console.log(kbkeycode.length + " " + keys.length);
	console.log("log", s.join(", "));
	const getKeyElement = function(key) {
		for (let i = 0; i < kbkeycode.length; i++)
			if (kbkeycode[i] == key)
				return keys[i];
		return null;
	};
	const pressKey = function(e) {
		const key = getKeyElement(e);
		if (key == null) return;
		if (key.className.indexOf(" keydown") == -1) {
			key.className += " keydown";
		}
	};
	const releaseKey = function(e) {
		const key = getKeyElement(e);
		if (key == null) return;
		key.className = key.className.replace(" keydown", "");
	};

	const divkey = document.createElement("div");
	//	const p = document.body;
	const p = text;
	p.onkeyup = function(e) {
		releaseKey(e.keyCode);
		if (e.keyCode == 9) {
			e.preventDefault();
		}
	};
	p.onkeydown = function(e) {
		const code = e.keyCode;
		pressKey(code);
		if (e.keyCode == 9) {
			e.preventDefault();
		}
		
		const s = [];
		const keyname = [ "keyCode", "charCode", "keyIdentifier", "keyLocation", "which" ];
		const keyflg = [ "shiftKey", "ctrlKey", "altKey", "altGraphKey", "metaKey" ];
		for (let i = 0; i < keyname.length; i++) {
			s.push(keyname[i] + ":" + e[keyname[i]]);
		}
		for (let i = 0; i < keyflg.length; i++) {
			if (e[keyflg[i]]) {
				s.push(keyflg[i]);
			}
		}
		const d = divkey.cloneNode(false);
		d.innerHTML = s.join(" ");
	};
	text.focus();
	keyboard.onclick = function() {
		text.focus();
	};
};
</script>
<style>
body {
	text-align: center;
}
#main {
	display: inline-block;
	width: 100%;
	padding-top: 20px;
}
#output {
	width: 100%;
	text-align: center;
	color: #aaa;
	font-size: 80%;
	margin-top: 10px;
}
#text {
	margin-top: 20px;
	width: 80%;
}
</style>
<body>

<div id="main">
	<div id="keyboard">
		<ul class="cf">
			<li><p class="key c27 fn esc"><span>esc</span></p></li>
			<li><p class="key c112 fn"><span>F1</span></p></li>
			<li><p class="key c113 fn"><span>F2</span></p></li>
			<li><p class="key c114 fn"><span>F3</span></p></li>
			<li><p class="key c115 fn"><span>F4</span></p></li>
			<li><p class="key c116 fn"><span>F5</span></p></li>
			<li><p class="key c117 fn"><span>F6</span></p></li>
			<li><p class="key c118 fn"><span>F7</span></p></li>
			<li><p class="key c119 fn"><span>F8</span></p></li>
			<li><p class="key c120 fn"><span>F9</span></p></li>
			<li><p class="key c121 fn"><span>F10</span></p></li>
			<li><p class="key c122 fn"><span>F11</span></p></li>
			<li><p class="key c123 fn"><span>F12</span></p></li>
			<li><p class="key fn eject"><span>Eject</span></p></li>
		</ul>
		<ul class="cf" id="numbers">
			<li><p class="key c192"><b>~</b><span>`</span></p></li>
			<li><p class="key c49"><b>!</b><span>1</span></p></li>
			<li><p class="key c50"><b>@</b><span>2</span></p></li>
			<li><p class="key c51"><b>#</b><span>3</span></p></li>
			<li><p class="key c52"><b>$</b><span>4</span></p></li>
			<li><p class="key c53"><b>%</b><span>5</span></p></li>
			<li><p class="key c54"><b>^</b><span>6</span></p></li>
			<li><p class="key c55"><b>&amp;</b><span>7</span></p></li>
			<li><p class="key c56"><b>*</b><span>8</span></p></li>
			<li><p class="key c57"><b>(</b><span>9</span></p></li>
			<li><p class="key c48"><b>)</b><span>0</span></p></li>
			<li><p class="key c189 alt"><b>_</b><span>-</span></p></li>
			<li><p class="key c187"><b>+</b><span>=</span></p></li>
			<li><p class="key c46 delete"><span>Delete</span></p></li>
		</ul>
		<ul class="cf" id="qwerty">
			<li><p class="key c9 tab"><span>tab</span></p></li>
			<li><p class="key c81"><span>q</span></p></li>
			<li><p class="key c87"><span>w</span></p></li>
			<li><p class="key c69"><span>e</span></p></li>
			<li><p class="key c82"><span>r</span></p></li>
			<li><p class="key c84"><span>t</span></p></li>
			<li><p class="key c89"><span>y</span></p></li>
			<li><p class="key c85"><span>u</span></p></li>
			<li><p class="key c73"><span>i</span></p></li>
			<li><p class="key c79"><span>o</span></p></li>
			<li><p class="key c80"><span>p</span></p></li>
			<li><p class="key c219 alt"><b>{</b><span>[</span></p></li>
			<li><p class="key c221 alt"><b>}</b><span>]</span></p></li>
			<li><p class="key c220 alt"><b>|</b><span>\</span></p></li>
		</ul>
		<ul class="cf" id="asdfg">
			<li><p class="key c20 alt caps"><b></b><span>caps lock</span></p></li>
			<li><p class="key c65"><span>a</span></p></li>
			<li><p class="key c83"><span>s</span></p></li>
			<li><p class="key c68"><span>d</span></p></li>
			<li><p class="key c70"><span>f</span></p></li>
			<li><p class="key c71"><span>g</span></p></li>
			<li><p class="key c72"><span>h</span></p></li>
			<li><p class="key c74"><span>j</span></p></li>
			<li><p class="key c75"><span>k</span></p></li>
			<li><p class="key c76"><span>l</span></p></li>
			<li><p class="key c186 alt"><b>:</b><span>;</span></p></li>
			<li><p class="key c222 alt"><b>"</b><span>'</span></p></li>
			<li><p class="key c13 alt enter"><span>return</span></p></li>
		</ul>
		<ul class="cf" id="zxcvb">
			<li><p class="key c16 shiftleft"><span>Shift</span></p></li>
			<li><p class="key c90"><span>z</span></p></li>
			<li><p class="key c88"><span>x</span></p></li>
			<li><p class="key c67"><span>c</span></p></li>
			<li><p class="key c86"><span>v</span></p></li>
			<li><p class="key c66"><span>b</span></p></li>
			<li><p class="key c78"><span>n</span></p></li>
			<li><p class="key c77"><span>m</span></p></li>
			<li><p class="key c188 alt"><b>&lt;</b><span>,</span></p></li>
			<li><p class="key c190 alt"><b>&gt;</b><span>.</span></p></li>
			<li><p class="key c191 alt"><b>?</b><span>/</span></p></li>
			<li><p class="key c16 shiftright"><span>Shift</span></p></li>
		</ul>
		<ul class="cf" id="bottomrow">
			<li><p class="key" id="fn"><span>fn</span></p></li>
			<li><p class="key c17" id="control"><span>control</span></p></li>
			<li><p class="key option" id="optionleft"><span>option</span></p></li>
			<li><p class="key command" id="commandleft"><span>command</span></p></li>
			<li><p class="key c32" id="spacebar"></p></li>
			<li><p class="key command" id="commandright"><span>command</span></p></li>
			<li><p class="key option" id="optionright"><span>option</span></p></li>
				<ol class="cf">
					<li><p class="key c37" id="left"><span></span></p></li>
						<li>
							<p class="key c38" id="up"><span></span></a>
							<p class="key c40" id="down"><span></span></a>
						</li>
					<li><p class="key c39" id="right"><span></span></p></li>
				</ol>
			</ul>
	</div>

<input type="text" id="text">
<div id="output">keytest<div id=dum></div></div>

</div>

<div id='credit'><img id='help'><a href='http://fukuno.jig.jp/2012/'>(c)taisukef CED</a></div><div id='helptips'><div id='helptipscontent'>
普通の練習用キーボード<br>
<br>
QWERTY配列のタッチタイプの練習や、外部キーボードの動作確認になどに使います。ただし、配列が英字キーボード風なので注意。<br>
<a href=http://cssdeck.com/user/kushsolitary target=_blank>kushsolitary</a>さんによる「<a href=http://cssdeck.com/item/120/apple-keyboard-via-css3 target=_blank>Apple Keyboard via CSS3 | CSSDeck</a>」を元にデザインなど少し修正。<br>
</div></div>

</body>
</html>
